import{b2 as U,b3 as Oe,b1 as Nr,b0 as mr}from"./index-CMgawD8L.js";import{z as G}from"./__vite-browser-external-v7f2oYTb.js";import{u as le,S as se,f as ne,r as rt,g as tt,t as nt,b as at}from"./browser-wNi_qKFh.js";import{c as ot}from"./callBound-pA4GrCTB.js";class _e extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class ie extends _e{constructor(e,t,n){super(e,t),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}const Be=Symbol.toStringTag,Mr=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[Be]==="URLSearchParams",Ue=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[Be]),it=r=>typeof r=="object"&&(r[Be]==="AbortSignal"||r[Be]==="EventTarget"),st=(r,e)=>{const t=new URL(e).hostname,n=new URL(r).hostname;return t===n||t.endsWith(`.${n}`)},ft=(r,e)=>{const t=new URL(e).protocol,n=new URL(r).protocol;return t===n},lt=le.promisify(se.pipeline),K=Symbol("Body internals");class Pe{constructor(e,{size:t=0}={}){let n=null;e===null?e=null:Mr(e)?e=U.from(e.toString()):Ue(e)||U.isBuffer(e)||(le.types.isAnyArrayBuffer(e)?e=U.from(e):ArrayBuffer.isView(e)?e=U.from(e.buffer,e.byteOffset,e.byteLength):e instanceof se||(e=U.from(String(e))));let a=e;U.isBuffer(e)?a=se.Readable.from(e):Ue(e)&&(a=se.Readable.from(e.stream())),this[K]={body:e,stream:a,boundary:n,disturbed:!1,error:null},this.size=t,e instanceof se&&e.on("error",o=>{const s=o instanceof _e?o:new ie(`Invalid response body while trying to fetch ${this.url}: ${o.message}`,"system",o);this[K].error=s})}get body(){return this[K].stream}get bodyUsed(){return this[K].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:t,byteLength:n}=await Ke(this);return e.slice(t,t+n)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[K].body&&this[K].body.type||"",t=await this.arrayBuffer();return new Blob([t],{type:e})}async json(){const e=await this.text();return JSON.parse(e)}async text(){const e=await Ke(this);return new TextDecoder().decode(e)}buffer(){return Ke(this)}}Pe.prototype.buffer=le.deprecate(Pe.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Pe.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:le.deprecate(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Ke(r){if(r[K].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[K].disturbed=!0,r[K].error)throw r[K].error;const{body:e}=r;if(e===null)return U.alloc(0);if(!(e instanceof se))return U.alloc(0);const t=[];let n=0;try{for await(const a of e){if(r.size>0&&n+a.length>r.size){const o=new ie(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw e.destroy(o),o}n+=a.length,t.push(a)}}catch(a){throw a instanceof _e?a:new ie(`Invalid response body while trying to fetch ${r.url}: ${a.message}`,"system",a)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return t.every(a=>typeof a=="string")?U.from(t.join("")):U.concat(t,n)}catch(a){throw new ie(`Could not create Buffer from response body for ${r.url}: ${a.message}`,"system",a)}else throw new ie(`Premature close of server response while trying to fetch ${r.url}`)}const ur=(r,e)=>{let t,n,{body:a}=r[K];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return a instanceof se&&typeof a.getBoundary!="function"&&(t=new ne.PassThrough({highWaterMark:e}),n=new ne.PassThrough({highWaterMark:e}),a.pipe(t),a.pipe(n),r[K].stream=t,a=n),a},ut=le.deprecate(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Br=(r,e)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":Mr(r)?"application/x-www-form-urlencoded;charset=UTF-8":Ue(r)?r.type||null:U.isBuffer(r)||le.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${ut(r)}`:r instanceof se?null:"text/plain;charset=UTF-8",ct=r=>{const{body:e}=r[K];return e===null?0:Ue(e)?e.size:U.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},ht=async(r,{body:e})=>{e===null?r.end():await lt(e,r)},Ne=typeof G.validateHeaderName=="function"?G.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){const e=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},er=typeof G.validateHeaderValue=="function"?G.validateHeaderValue:(r,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){const t=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}};class ue extends URLSearchParams{constructor(e){let t=[];if(e instanceof ue){const n=e.raw();for(const[a,o]of Object.entries(n))t.push(...o.map(s=>[a,s]))}else if(e!=null)if(typeof e=="object"&&!le.types.isBoxedPrimitive(e)){const n=e[Symbol.iterator];if(n==null)t.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");t=[...e].map(a=>{if(typeof a!="object"||le.types.isBoxedPrimitive(a))throw new TypeError("Each header pair must be an iterable object");return[...a]}).map(a=>{if(a.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...a]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return t=t.length>0?t.map(([n,a])=>(Ne(n),er(n,String(a)),[String(n).toLowerCase(),String(a)])):void 0,super(t),new Proxy(this,{get(n,a,o){switch(a){case"append":case"set":return(s,i)=>(Ne(s),er(s,String(i)),URLSearchParams.prototype[a].call(n,String(s).toLowerCase(),String(i)));case"delete":case"has":case"getAll":return s=>(Ne(s),URLSearchParams.prototype[a].call(n,String(s).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,a,o)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const t=this.getAll(e);if(t.length===0)return null;let n=t.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,t=void 0){for(const n of this.keys())Reflect.apply(e,t,[this.get(n),n,this])}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,t)=>(e[t]=this.getAll(t),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,t)=>{const n=this.getAll(t);return t==="host"?e[t]=n[0]:e[t]=n.length>1?n:n[0],e},{})}}Object.defineProperties(ue.prototype,["get","entries","forEach","values"].reduce((r,e)=>(r[e]={enumerable:!0},r),{}));function pt(r=[]){return new ue(r.reduce((e,t,n,a)=>(n%2===0&&e.push(a.slice(n,n+2)),e),[]).filter(([e,t])=>{try{return Ne(e),er(e,String(t)),!0}catch{return!1}}))}const dt=new Set([301,302,303,307,308]),Ur=r=>dt.has(r),j=Symbol("Response internals");class Q extends Pe{constructor(e=null,t={}){super(e,t);const n=t.status!=null?t.status:200,a=new ue(t.headers);if(e!==null&&!a.has("Content-Type")){const o=Br(e);o&&a.append("Content-Type",o)}this[j]={type:"default",url:t.url,status:n,statusText:t.statusText||"",headers:a,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[j].type}get url(){return this[j].url||""}get status(){return this[j].status}get ok(){return this[j].status>=200&&this[j].status<300}get redirected(){return this[j].counter>0}get statusText(){return this[j].statusText}get headers(){return this[j].headers}get highWaterMark(){return this[j].highWaterMark}clone(){return new Q(ur(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!Ur(t))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Q(null,{headers:{location:new URL(e).toString()},status:t})}static error(){const e=new Q(null,{status:0,statusText:""});return e[j].type="error",e}static json(e=void 0,t={}){const n=JSON.stringify(e);if(n===void 0)throw new TypeError("data is not JSON serializable");const a=new ue(t&&t.headers);return a.has("content-type")||a.set("content-type","application/json"),new Q(n,{...t,headers:a})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(Q.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var ke={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */ke.exports;(function(r,e){(function(t){var n=e&&!e.nodeType&&e,a=r&&!r.nodeType&&r,o=typeof Oe=="object"&&Oe;(o.global===o||o.window===o||o.self===o)&&(t=o);var s,i=2147483647,l=36,f=1,c=26,b=38,u=700,m=72,h=128,T="-",g=/^xn--/,O=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=l-f,v=Math.floor,x=String.fromCharCode,F;function R(d){throw new RangeError(y[d])}function P(d,w){for(var E=d.length,A=[];E--;)A[E]=w(d[E]);return A}function D(d,w){var E=d.split("@"),A="";E.length>1&&(A=E[0]+"@",d=E[1]),d=d.replace(p,".");var C=d.split("."),_=P(C,w).join(".");return A+_}function J(d){for(var w=[],E=0,A=d.length,C,_;E<A;)C=d.charCodeAt(E++),C>=55296&&C<=56319&&E<A?(_=d.charCodeAt(E++),(_&64512)==56320?w.push(((C&1023)<<10)+(_&1023)+65536):(w.push(C),E--)):w.push(C);return w}function Z(d){return P(d,function(w){var E="";return w>65535&&(w-=65536,E+=x(w>>>10&1023|55296),w=56320|w&1023),E+=x(w),E}).join("")}function L(d){return d-48<10?d-22:d-65<26?d-65:d-97<26?d-97:l}function z(d,w){return d+22+75*(d<26)-((w!=0)<<5)}function W(d,w,E){var A=0;for(d=E?v(d/u):d>>1,d+=v(d/w);d>S*c>>1;A+=l)d=v(d/S);return v(A+(S+1)*d/(d+b))}function H(d){var w=[],E=d.length,A,C=0,_=h,M=m,q,Y,re,fe,B,V,X,he,me;for(q=d.lastIndexOf(T),q<0&&(q=0),Y=0;Y<q;++Y)d.charCodeAt(Y)>=128&&R("not-basic"),w.push(d.charCodeAt(Y));for(re=q>0?q+1:0;re<E;){for(fe=C,B=1,V=l;re>=E&&R("invalid-input"),X=L(d.charCodeAt(re++)),(X>=l||X>v((i-C)/B))&&R("overflow"),C+=X*B,he=V<=M?f:V>=M+c?c:V-M,!(X<he);V+=l)me=l-he,B>v(i/me)&&R("overflow"),B*=me;A=w.length+1,M=W(C-fe,A,fe==0),v(C/A)>i-_&&R("overflow"),_+=v(C/A),C%=A,w.splice(C++,0,_)}return Z(w)}function ce(d){var w,E,A,C,_,M,q,Y,re,fe,B,V=[],X,he,me,qe;for(d=J(d),X=d.length,w=h,E=0,_=m,M=0;M<X;++M)B=d[M],B<128&&V.push(x(B));for(A=C=V.length,C&&V.push(T);A<X;){for(q=i,M=0;M<X;++M)B=d[M],B>=w&&B<q&&(q=B);for(he=A+1,q-w>v((i-E)/he)&&R("overflow"),E+=(q-w)*he,w=q,M=0;M<X;++M)if(B=d[M],B<w&&++E>i&&R("overflow"),B==w){for(Y=E,re=l;fe=re<=_?f:re>=_+c?c:re-_,!(Y<fe);re+=l)qe=Y-fe,me=l-fe,V.push(x(z(fe+qe%me,0))),Y=v(qe/me);V.push(x(z(Y,0))),_=W(E,he,A==C),E=0,++A}++E,++w}return V.join("")}function He(d){return D(d,function(w){return g.test(w)?H(w.slice(4).toLowerCase()):w})}function Le(d){return D(d,function(w){return O.test(w)?"xn--"+ce(w):w})}if(s={version:"1.4.1",ucs2:{decode:J,encode:Z},decode:H,encode:ce,toASCII:Le,toUnicode:He},n&&a)if(r.exports==n)a.exports=s;else for(F in s)s.hasOwnProperty(F)&&(n[F]=s[F]);else t.punycode=s})(Oe)})(ke,ke.exports);var yt=ke.exports;const mt=Nr(yt);var cr=typeof Map=="function"&&Map.prototype,Ve=Object.getOwnPropertyDescriptor&&cr?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ze=cr&&Ve&&typeof Ve.get=="function"?Ve.get:null,gr=cr&&Map.prototype.forEach,hr=typeof Set=="function"&&Set.prototype,Ge=Object.getOwnPropertyDescriptor&&hr?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,We=hr&&Ge&&typeof Ge.get=="function"?Ge.get:null,vr=hr&&Set.prototype.forEach,gt=typeof WeakMap=="function"&&WeakMap.prototype,Re=gt?WeakMap.prototype.has:null,vt=typeof WeakSet=="function"&&WeakSet.prototype,Ae=vt?WeakSet.prototype.has:null,wt=typeof WeakRef=="function"&&WeakRef.prototype,wr=wt?WeakRef.prototype.deref:null,bt=Boolean.prototype.valueOf,St=Object.prototype.toString,xt=Function.prototype.toString,Et=String.prototype.match,pr=String.prototype.slice,de=String.prototype.replace,Tt=String.prototype.toUpperCase,br=String.prototype.toLowerCase,kr=RegExp.prototype.test,Sr=Array.prototype.concat,oe=Array.prototype.join,Ot=Array.prototype.slice,xr=Math.floor,rr=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Qe=Object.getOwnPropertySymbols,tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,be=typeof Symbol=="function"&&typeof Symbol.iterator=="object",k=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===be||!0)?Symbol.toStringTag:null,zr=Object.prototype.propertyIsEnumerable,Er=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function Tr(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||kr.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-xr(-r):xr(r);if(n!==r){var a=String(n),o=pr.call(e,a.length+1);return de.call(a,t,"$&_")+"."+de.call(de.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return de.call(e,t,"$&_")}var nr=rt,Or=nr.custom,Rr=_r(Or)?Or:null,Rt=function r(e,t,n,a){var o=t||{};if(pe(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(pe(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=pe(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(pe(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(pe(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var i=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return qr(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return i?Tr(e,l):l}if(typeof e=="bigint"){var f=String(e)+"n";return i?Tr(e,f):f}var c=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof e=="object")return ar(e)?"[Array]":"[Object]";var b=qt(o,n);if(typeof a>"u")a=[];else if(Hr(a,e)>=0)return"[Circular]";function u(L,z,W){if(z&&(a=Ot.call(a),a.push(z)),W){var H={depth:o.depth};return pe(o,"quoteStyle")&&(H.quoteStyle=o.quoteStyle),r(L,H,n+1,a)}return r(L,o,n+1,a)}if(typeof e=="function"&&!Ar(e)){var m=Nt(e),h=Ie(e,u);return"[Function"+(m?": "+m:" (anonymous)")+"]"+(h.length>0?" { "+oe.call(h,", ")+" }":"")}if(_r(e)){var T=be?de.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):tr.call(e);return typeof e=="object"&&!be?Ee(T):T}if(Wt(e)){for(var g="<"+br.call(String(e.nodeName)),O=e.attributes||[],p=0;p<O.length;p++)g+=" "+O[p].name+"="+Wr(At(O[p].value),"double",o);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+br.call(String(e.nodeName))+">",g}if(ar(e)){if(e.length===0)return"[]";var y=Ie(e,u);return b&&!Ht(y)?"["+or(y,b)+"]":"[ "+oe.call(y,", ")+" ]"}if(Pt(e)){var S=Ie(e,u);return!("cause"in Error.prototype)&&"cause"in e&&!zr.call(e,"cause")?"{ ["+String(e)+"] "+oe.call(Sr.call("[cause]: "+u(e.cause),S),", ")+" }":S.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+oe.call(S,", ")+" }"}if(typeof e=="object"&&s){if(Rr&&typeof e[Rr]=="function"&&nr)return nr(e,{depth:c-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Mt(e)){var v=[];return gr&&gr.call(e,function(L,z){v.push(u(z,e,!0)+" => "+u(L,e))}),$r("Map",ze.call(e),v,b)}if(kt(e)){var x=[];return vr&&vr.call(e,function(L){x.push(u(L,e))}),$r("Set",We.call(e),x,b)}if(Bt(e))return Je("WeakMap");if(zt(e))return Je("WeakSet");if(Ut(e))return Je("WeakRef");if(Lt(e))return Ee(u(Number(e)));if(Ft(e))return Ee(u(rr.call(e)));if(It(e))return Ee(bt.call(e));if(Ct(e))return Ee(u(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof Oe<"u"&&e===Oe)return"{ [object globalThis] }";if(!$t(e)&&!Ar(e)){var F=Ie(e,u),R=Er?Er(e)===Object.prototype:e instanceof Object||e.constructor===Object,P=e instanceof Object?"":"null prototype",D=!R&&k&&Object(e)===e&&k in e?pr.call(ye(e),8,-1):P?"Object":"",J=R||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",Z=J+(D||P?"["+oe.call(Sr.call([],D||[],P||[]),": ")+"] ":"");return F.length===0?Z+"{}":b?Z+"{"+or(F,b)+"}":Z+"{ "+oe.call(F,", ")+" }"}return String(e)};function Wr(r,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+r+n}function At(r){return de.call(String(r),/"/g,"&quot;")}function ar(r){return ye(r)==="[object Array]"&&(!k||!(typeof r=="object"&&k in r))}function $t(r){return ye(r)==="[object Date]"&&(!k||!(typeof r=="object"&&k in r))}function Ar(r){return ye(r)==="[object RegExp]"&&(!k||!(typeof r=="object"&&k in r))}function Pt(r){return ye(r)==="[object Error]"&&(!k||!(typeof r=="object"&&k in r))}function Ct(r){return ye(r)==="[object String]"&&(!k||!(typeof r=="object"&&k in r))}function Lt(r){return ye(r)==="[object Number]"&&(!k||!(typeof r=="object"&&k in r))}function It(r){return ye(r)==="[object Boolean]"&&(!k||!(typeof r=="object"&&k in r))}function _r(r){if(be)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!tr)return!1;try{return tr.call(r),!0}catch{}return!1}function Ft(r){if(!r||typeof r!="object"||!rr)return!1;try{return rr.call(r),!0}catch{}return!1}var Dt=Object.prototype.hasOwnProperty||function(r){return r in this};function pe(r,e){return Dt.call(r,e)}function ye(r){return St.call(r)}function Nt(r){if(r.name)return r.name;var e=Et.call(xt.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function Hr(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function Mt(r){if(!ze||!r||typeof r!="object")return!1;try{ze.call(r);try{We.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function Bt(r){if(!Re||!r||typeof r!="object")return!1;try{Re.call(r,Re);try{Ae.call(r,Ae)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function Ut(r){if(!wr||!r||typeof r!="object")return!1;try{return wr.call(r),!0}catch{}return!1}function kt(r){if(!We||!r||typeof r!="object")return!1;try{We.call(r);try{ze.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function zt(r){if(!Ae||!r||typeof r!="object")return!1;try{Ae.call(r,Ae);try{Re.call(r,Re)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function Wt(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function qr(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return qr(pr.call(r,0,e.maxStringLength),e)+n}var a=de.call(de.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,_t);return Wr(a,"single",e)}function _t(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+Tt.call(e.toString(16))}function Ee(r){return"Object("+r+")"}function Je(r){return r+" { ? }"}function $r(r,e,t,n){var a=n?or(t,n):oe.call(t,", ");return r+" ("+e+") {"+a+"}"}function Ht(r){for(var e=0;e<r.length;e++)if(Hr(r[e],`
`)>=0)return!1;return!0}function qt(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=oe.call(Array(r.indent+1)," ");else return null;return{base:t,prev:oe.call(Array(e+1),t)}}function or(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+oe.call(r,","+t)+`
`+e.prev}function Ie(r,e){var t=ar(r),n=[];if(t){n.length=r.length;for(var a=0;a<r.length;a++)n[a]=pe(r,a)?e(r[a],r):""}var o=typeof Qe=="function"?Qe(r):[],s;if(be){s={};for(var i=0;i<o.length;i++)s["$"+o[i]]=o[i]}for(var l in r)pe(r,l)&&(t&&String(Number(l))===l&&l<r.length||be&&s["$"+l]instanceof Symbol||(kr.call(/[^\w$]/,l)?n.push(e(l,r)+": "+e(r[l],r)):n.push(l+": "+e(r[l],r))));if(typeof Qe=="function")for(var f=0;f<o.length;f++)zr.call(r,o[f])&&n.push("["+e(o[f])+"]: "+e(r[o[f]],r));return n}var Kr=tt,xe=ot,Kt=Rt,Vt=nt,Fe=Kr("%WeakMap%",!0),De=Kr("%Map%",!0),Gt=xe("WeakMap.prototype.get",!0),Qt=xe("WeakMap.prototype.set",!0),Jt=xe("WeakMap.prototype.has",!0),Zt=xe("Map.prototype.get",!0),Yt=xe("Map.prototype.set",!0),Xt=xe("Map.prototype.has",!0),dr=function(r,e){for(var t=r,n;(n=t.next)!==null;t=n)if(n.key===e)return t.next=n.next,n.next=r.next,r.next=n,n},jt=function(r,e){var t=dr(r,e);return t&&t.value},en=function(r,e,t){var n=dr(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},rn=function(r,e){return!!dr(r,e)},tn=function(){var e,t,n,a={assert:function(o){if(!a.has(o))throw new Vt("Side channel does not contain "+Kt(o))},get:function(o){if(Fe&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Gt(e,o)}else if(De){if(t)return Zt(t,o)}else if(n)return jt(n,o)},has:function(o){if(Fe&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Jt(e,o)}else if(De){if(t)return Xt(t,o)}else if(n)return rn(n,o);return!1},set:function(o,s){Fe&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Fe),Qt(e,o,s)):De?(t||(t=new De),Yt(t,o,s)):(n||(n={key:{},next:null}),en(n,o,s))}};return a},nn=String.prototype.replace,an=/%20/g,Ze={RFC1738:"RFC1738",RFC3986:"RFC3986"},yr={default:Ze.RFC3986,formatters:{RFC1738:function(r){return nn.call(r,an,"+")},RFC3986:function(r){return String(r)}},RFC1738:Ze.RFC1738,RFC3986:Ze.RFC3986},on=yr,Ye=Object.prototype.hasOwnProperty,ge=Array.isArray,te=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),sn=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(ge(n)){for(var a=[],o=0;o<n.length;++o)typeof n[o]<"u"&&a.push(n[o]);t.obj[t.prop]=a}}},Vr=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},a=0;a<e.length;++a)typeof e[a]<"u"&&(n[a]=e[a]);return n},fn=function r(e,t,n){if(!t)return e;if(typeof t!="object"){if(ge(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Ye.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var a=e;return ge(e)&&!ge(t)&&(a=Vr(e,n)),ge(e)&&ge(t)?(t.forEach(function(o,s){if(Ye.call(e,s)){var i=e[s];i&&typeof i=="object"&&o&&typeof o=="object"?e[s]=r(i,o,n):e.push(o)}else e[s]=o}),e):Object.keys(t).reduce(function(o,s){var i=t[s];return Ye.call(o,s)?o[s]=r(o[s],i,n):o[s]=i,o},a)},ln=function(e,t){return Object.keys(t).reduce(function(n,a){return n[a]=t[a],n},e)},un=function(r,e,t){var n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Xe=1024,cn=function(e,t,n,a,o){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(m){return"%26%23"+parseInt(m.slice(2),16)+"%3B"});for(var i="",l=0;l<s.length;l+=Xe){for(var f=s.length>=Xe?s.slice(l,l+Xe):s,c=[],b=0;b<f.length;++b){var u=f.charCodeAt(b);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===on.RFC1738&&(u===40||u===41)){c[c.length]=f.charAt(b);continue}if(u<128){c[c.length]=te[u];continue}if(u<2048){c[c.length]=te[192|u>>6]+te[128|u&63];continue}if(u<55296||u>=57344){c[c.length]=te[224|u>>12]+te[128|u>>6&63]+te[128|u&63];continue}b+=1,u=65536+((u&1023)<<10|f.charCodeAt(b)&1023),c[c.length]=te[240|u>>18]+te[128|u>>12&63]+te[128|u>>6&63]+te[128|u&63]}i+=c.join("")}return i},hn=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],a=0;a<t.length;++a)for(var o=t[a],s=o.obj[o.prop],i=Object.keys(s),l=0;l<i.length;++l){var f=i[l],c=s[f];typeof c=="object"&&c!==null&&n.indexOf(c)===-1&&(t.push({obj:s,prop:f}),n.push(c))}return sn(t),e},pn=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},dn=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},yn=function(e,t){return[].concat(e,t)},mn=function(e,t){if(ge(e)){for(var n=[],a=0;a<e.length;a+=1)n.push(t(e[a]));return n}return t(e)},Gr={arrayToObject:Vr,assign:ln,combine:yn,compact:hn,decode:un,encode:cn,isBuffer:dn,isRegExp:pn,maybeMap:mn,merge:fn},Qr=tn,Me=Gr,$e=yr,gn=Object.prototype.hasOwnProperty,Jr={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},ae=Array.isArray,vn=Array.prototype.push,Zr=function(r,e){vn.apply(r,ae(e)?e:[e])},wn=Date.prototype.toISOString,Pr=$e.default,I={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Me.encode,encodeValuesOnly:!1,format:Pr,formatter:$e.formatters[Pr],indices:!1,serializeDate:function(e){return wn.call(e)},skipNulls:!1,strictNullHandling:!1},bn=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},je={},Sn=function r(e,t,n,a,o,s,i,l,f,c,b,u,m,h,T,g,O,p){for(var y=e,S=p,v=0,x=!1;(S=S.get(je))!==void 0&&!x;){var F=S.get(e);if(v+=1,typeof F<"u"){if(F===v)throw new RangeError("Cyclic object value");x=!0}typeof S.get(je)>"u"&&(v=0)}if(typeof c=="function"?y=c(t,y):y instanceof Date?y=m(y):n==="comma"&&ae(y)&&(y=Me.maybeMap(y,function(d){return d instanceof Date?m(d):d})),y===null){if(s)return f&&!g?f(t,I.encoder,O,"key",h):t;y=""}if(bn(y)||Me.isBuffer(y)){if(f){var R=g?t:f(t,I.encoder,O,"key",h);return[T(R)+"="+T(f(y,I.encoder,O,"value",h))]}return[T(t)+"="+T(String(y))]}var P=[];if(typeof y>"u")return P;var D;if(n==="comma"&&ae(y))g&&f&&(y=Me.maybeMap(y,f)),D=[{value:y.length>0?y.join(",")||null:void 0}];else if(ae(c))D=c;else{var J=Object.keys(y);D=b?J.sort(b):J}var Z=l?t.replace(/\./g,"%2E"):t,L=a&&ae(y)&&y.length===1?Z+"[]":Z;if(o&&ae(y)&&y.length===0)return L+"[]";for(var z=0;z<D.length;++z){var W=D[z],H=typeof W=="object"&&typeof W.value<"u"?W.value:y[W];if(!(i&&H===null)){var ce=u&&l?W.replace(/\./g,"%2E"):W,He=ae(y)?typeof n=="function"?n(L,ce):L:L+(u?"."+ce:"["+ce+"]");p.set(e,v);var Le=Qr();Le.set(je,p),Zr(P,r(H,He,n,a,o,s,i,l,n==="comma"&&g&&ae(y)?null:f,c,b,u,m,h,T,g,O,Le))}}return P},xn=function(e){if(!e)return I;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||I.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=$e.default;if(typeof e.format<"u"){if(!gn.call($e.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var a=$e.formatters[n],o=I.filter;(typeof e.filter=="function"||ae(e.filter))&&(o=e.filter);var s;if(e.arrayFormat in Jr?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=I.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var i=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:I.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:I.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:I.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:I.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?I.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:I.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:I.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:I.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:I.encodeValuesOnly,filter:o,format:n,formatter:a,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:I.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:I.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:I.strictNullHandling}},En=function(r,e){var t=r,n=xn(e),a,o;typeof n.filter=="function"?(o=n.filter,t=o("",t)):ae(n.filter)&&(o=n.filter,a=o);var s=[];if(typeof t!="object"||t===null)return"";var i=Jr[n.arrayFormat],l=i==="comma"&&n.commaRoundTrip;a||(a=Object.keys(t)),n.sort&&a.sort(n.sort);for(var f=Qr(),c=0;c<a.length;++c){var b=a[c];n.skipNulls&&t[b]===null||Zr(s,Sn(t[b],b,i,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,f))}var u=s.join(n.delimiter),m=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),u.length>0?m+u:""},Se=Gr,ir=Object.prototype.hasOwnProperty,Tn=Array.isArray,$={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Se.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},On=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},Yr=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},Rn="utf8=%26%2310003%3B",An="utf8=%E2%9C%93",$n=function(e,t){var n={__proto__:null},a=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;a=a.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var o=t.parameterLimit===1/0?void 0:t.parameterLimit,s=a.split(t.delimiter,o),i=-1,l,f=t.charset;if(t.charsetSentinel)for(l=0;l<s.length;++l)s[l].indexOf("utf8=")===0&&(s[l]===An?f="utf-8":s[l]===Rn&&(f="iso-8859-1"),i=l,l=s.length);for(l=0;l<s.length;++l)if(l!==i){var c=s[l],b=c.indexOf("]="),u=b===-1?c.indexOf("="):b+1,m,h;u===-1?(m=t.decoder(c,$.decoder,f,"key"),h=t.strictNullHandling?null:""):(m=t.decoder(c.slice(0,u),$.decoder,f,"key"),h=Se.maybeMap(Yr(c.slice(u+1),t),function(g){return t.decoder(g,$.decoder,f,"value")})),h&&t.interpretNumericEntities&&f==="iso-8859-1"&&(h=On(h)),c.indexOf("[]=")>-1&&(h=Tn(h)?[h]:h);var T=ir.call(n,m);T&&t.duplicates==="combine"?n[m]=Se.combine(n[m],h):(!T||t.duplicates==="last")&&(n[m]=h)}return n},Pn=function(r,e,t,n){for(var a=n?e:Yr(e,t),o=r.length-1;o>=0;--o){var s,i=r[o];if(i==="[]"&&t.parseArrays)s=t.allowEmptyArrays&&(a===""||t.strictNullHandling&&a===null)?[]:[].concat(a);else{s=t.plainObjects?Object.create(null):{};var l=i.charAt(0)==="["&&i.charAt(i.length-1)==="]"?i.slice(1,-1):i,f=t.decodeDotInKeys?l.replace(/%2E/g,"."):l,c=parseInt(f,10);!t.parseArrays&&f===""?s={0:a}:!isNaN(c)&&i!==f&&String(c)===f&&c>=0&&t.parseArrays&&c<=t.arrayLimit?(s=[],s[c]=a):f!=="__proto__"&&(s[f]=a)}a=s}return a},Cn=function(e,t,n,a){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,i=/(\[[^[\]]*])/g,l=n.depth>0&&s.exec(o),f=l?o.slice(0,l.index):o,c=[];if(f){if(!n.plainObjects&&ir.call(Object.prototype,f)&&!n.allowPrototypes)return;c.push(f)}for(var b=0;n.depth>0&&(l=i.exec(o))!==null&&b<n.depth;){if(b+=1,!n.plainObjects&&ir.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(l[1])}if(l){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");c.push("["+o.slice(l.index)+"]")}return Pn(c,t,n,a)}},Ln=function(e){if(!e)return $;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?$.charset:e.charset,n=typeof e.duplicates>"u"?$.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var a=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:$.allowDots:!!e.allowDots;return{allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:$.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:$.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:$.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:$.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:$.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:$.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:$.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:$.decoder,delimiter:typeof e.delimiter=="string"||Se.isRegExp(e.delimiter)?e.delimiter:$.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:$.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:$.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:$.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:$.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:$.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:$.strictNullHandling}},In=function(r,e){var t=Ln(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?$n(r,t):r,a=t.plainObjects?Object.create(null):{},o=Object.keys(n),s=0;s<o.length;++s){var i=o[s],l=Cn(i,n[i],t,typeof r=="string");a=Se.merge(a,l,t)}return t.allowSparse===!0?a:Se.compact(a)},Fn=En,Dn=In,Nn=yr,Mn={formats:Nn,parse:Dn,stringify:Fn};const Bn=Nr(Mn);var Un=mt;function ee(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var kn=/^([a-z0-9.+-]+:)/i,zn=/:[0-9]*$/,Wn=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,_n=["<",">",'"',"`"," ","\r",`
`,"	"],Hn=["{","}","|","\\","^","`"].concat(_n),sr=["'"].concat(Hn),Cr=["%","/","?",";","#"].concat(sr),Lr=["/","?","#"],qn=255,Ir=/^[+a-z0-9A-Z_-]{0,63}$/,Kn=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Vn={javascript:!0,"javascript:":!0},fr={javascript:!0,"javascript:":!0},we={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},lr=Bn;function Xr(r,e,t){if(r&&typeof r=="object"&&r instanceof ee)return r;var n=new ee;return n.parse(r,e,t),n}ee.prototype.parse=function(r,e,t){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),a=n!==-1&&n<r.indexOf("#")?"?":"#",o=r.split(a),s=/\\/g;o[0]=o[0].replace(s,"/"),r=o.join(a);var i=r;if(i=i.trim(),!t&&r.split("#").length===1){var l=Wn.exec(i);if(l)return this.path=i,this.href=i,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=lr.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=kn.exec(i);if(f){f=f[0];var c=f.toLowerCase();this.protocol=c,i=i.substr(f.length)}if(t||f||i.match(/^\/\/[^@/]+@[^@/]+/)){var b=i.substr(0,2)==="//";b&&!(f&&fr[f])&&(i=i.substr(2),this.slashes=!0)}if(!fr[f]&&(b||f&&!we[f])){for(var u=-1,m=0;m<Lr.length;m++){var h=i.indexOf(Lr[m]);h!==-1&&(u===-1||h<u)&&(u=h)}var T,g;u===-1?g=i.lastIndexOf("@"):g=i.lastIndexOf("@",u),g!==-1&&(T=i.slice(0,g),i=i.slice(g+1),this.auth=decodeURIComponent(T)),u=-1;for(var m=0;m<Cr.length;m++){var h=i.indexOf(Cr[m]);h!==-1&&(u===-1||h<u)&&(u=h)}u===-1&&(u=i.length),this.host=i.slice(0,u),i=i.slice(u),this.parseHost(),this.hostname=this.hostname||"";var O=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!O)for(var p=this.hostname.split(/\./),m=0,y=p.length;m<y;m++){var S=p[m];if(S&&!S.match(Ir)){for(var v="",x=0,F=S.length;x<F;x++)S.charCodeAt(x)>127?v+="x":v+=S[x];if(!v.match(Ir)){var R=p.slice(0,m),P=p.slice(m+1),D=S.match(Kn);D&&(R.push(D[1]),P.unshift(D[2])),P.length&&(i="/"+P.join(".")+i),this.hostname=R.join(".");break}}}this.hostname.length>qn?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=Un.toASCII(this.hostname));var J=this.port?":"+this.port:"",Z=this.hostname||"";this.host=Z+J,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),i[0]!=="/"&&(i="/"+i))}if(!Vn[c])for(var m=0,y=sr.length;m<y;m++){var L=sr[m];if(i.indexOf(L)!==-1){var z=encodeURIComponent(L);z===L&&(z=escape(L)),i=i.split(L).join(z)}}var W=i.indexOf("#");W!==-1&&(this.hash=i.substr(W),i=i.slice(0,W));var H=i.indexOf("?");if(H!==-1?(this.search=i.substr(H),this.query=i.substr(H+1),e&&(this.query=lr.parse(this.query)),i=i.slice(0,H)):e&&(this.search="",this.query={}),i&&(this.pathname=i),we[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var J=this.pathname||"",ce=this.search||"";this.path=J+ce}return this.href=this.format(),this};function Gn(r){return typeof r=="string"&&(r=Xr(r)),r instanceof ee?r.format():ee.prototype.format.call(r)}ee.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",a=!1,o="";this.host?a=r+this.host:this.hostname&&(a=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(o=lr.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||we[e])&&a!==!1?(a="//"+(a||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):a||(a=""),n&&n.charAt(0)!=="#"&&(n="#"+n),s&&s.charAt(0)!=="?"&&(s="?"+s),t=t.replace(/[?#]/g,function(i){return encodeURIComponent(i)}),s=s.replace("#","%23"),e+a+t+s+n};ee.prototype.resolve=function(r){return this.resolveObject(Xr(r,!1,!0)).format()};ee.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new ee;e.parse(r,!1,!0),r=e}for(var t=new ee,n=Object.keys(this),a=0;a<n.length;a++){var o=n[a];t[o]=this[o]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var s=Object.keys(r),i=0;i<s.length;i++){var l=s[i];l!=="protocol"&&(t[l]=r[l])}return we[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!we[r.protocol]){for(var f=Object.keys(r),c=0;c<f.length;c++){var b=f[c];t[b]=r[b]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!fr[r.protocol]){for(var y=(r.pathname||"").split("/");y.length&&!(r.host=y.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),t.pathname=y.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var u=t.pathname||"",m=t.search||"";t.path=u+m}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var h=t.pathname&&t.pathname.charAt(0)==="/",T=r.host||r.pathname&&r.pathname.charAt(0)==="/",g=T||h||t.host&&r.pathname,O=g,p=t.pathname&&t.pathname.split("/")||[],y=r.pathname&&r.pathname.split("/")||[],S=t.protocol&&!we[t.protocol];if(S&&(t.hostname="",t.port=null,t.host&&(p[0]===""?p[0]=t.host:p.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(y[0]===""?y[0]=r.host:y.unshift(r.host)),r.host=null),g=g&&(y[0]===""||p[0]==="")),T)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,p=y;else if(y.length)p||(p=[]),p.pop(),p=p.concat(y),t.search=r.search,t.query=r.query;else if(r.search!=null){if(S){t.host=p.shift(),t.hostname=t.host;var v=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;v&&(t.auth=v.shift(),t.hostname=v.shift(),t.host=t.hostname)}return t.search=r.search,t.query=r.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!p.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var x=p.slice(-1)[0],F=(t.host||r.host||p.length>1)&&(x==="."||x==="..")||x==="",R=0,P=p.length;P>=0;P--)x=p[P],x==="."?p.splice(P,1):x===".."?(p.splice(P,1),R++):R&&(p.splice(P,1),R--);if(!g&&!O)for(;R--;R)p.unshift("..");g&&p[0]!==""&&(!p[0]||p[0].charAt(0)!=="/")&&p.unshift(""),F&&p.join("/").substr(-1)!=="/"&&p.push("");var D=p[0]===""||p[0]&&p[0].charAt(0)==="/";if(S){t.hostname=D?"":p.length?p.shift():"",t.host=t.hostname;var v=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;v&&(t.auth=v.shift(),t.hostname=v.shift(),t.host=t.hostname)}return g=g||t.host&&p.length,g&&!D&&p.unshift(""),p.length>0?t.pathname=p.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};ee.prototype.parseHost=function(){var r=this.host,e=zn.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};var Qn=Gn,jr=function(r){function e(){var n=this||self;return delete r.prototype.__magic__,n}if(typeof globalThis=="object")return globalThis;if(this)return e();r.defineProperty(r.prototype,"__magic__",{configurable:!0,get:e});var t=__magic__;return t}(Object),Jn=Qn,Fr=jr.URL;jr.URLSearchParams;var Zn=function(e,t){var n,a,o,s;if(t===void 0&&(t={}),!(e instanceof Fr))return Jn(e);if(typeof t!="object"||t===null)throw new TypeError('The "options" argument must be of type object.');var i=(n=t.auth)!=null?n:!0,l=(a=t.fragment)!=null?a:!0,f=(o=t.search)!=null?o:!0;(s=t.unicode)!=null;var c=new Fr(e.toString());return i||(c.username="",c.password=""),l||(c.hash=""),f||(c.search=""),c.toString()};const Yn=r=>{if(r.search)return r.search;const e=r.href.length-1,t=r.hash||(r.href[e]==="#"?"#":"");return r.href[e-t.length]==="?"?"?":""};function Dr(r,e=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",e&&(r.pathname="",r.search=""),r)}const et=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Xn="strict-origin-when-cross-origin";function jn(r){if(!et.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function ea(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;const e=r.host.replace(/(^\[)|(]$)/g,""),t=at.isIP(e);return t===4&&/^127\./.test(e)||t===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function ve(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:ea(r)}function ra(r,{referrerURLCallback:e,referrerOriginCallback:t}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;const n=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";const a=r.referrer;let o=Dr(a),s=Dr(a,!0);o.toString().length>4096&&(o=s),e&&(o=e(o)),t&&(s=t(s));const i=new URL(r.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return s;case"unsafe-url":return o;case"strict-origin":return ve(o)&&!ve(i)?"no-referrer":s.toString();case"strict-origin-when-cross-origin":return o.origin===i.origin?o:ve(o)&&!ve(i)?"no-referrer":s;case"same-origin":return o.origin===i.origin?o:"no-referrer";case"origin-when-cross-origin":return o.origin===i.origin?o:s;case"no-referrer-when-downgrade":return ve(o)&&!ve(i)?"no-referrer":o;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function ta(r){const e=(r.get("referrer-policy")||"").split(/[,\s]+/);let t="";for(const n of e)n&&et.has(n)&&(t=n);return t}const N=Symbol("Request internals"),Te=r=>typeof r=="object"&&typeof r[N]=="object",na=le.deprecate(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class Ce extends Pe{constructor(e,t={}){let n;if(Te(e)?n=new URL(e.url):(n=new URL(e),e={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentials.`);let a=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(a)&&(a=a.toUpperCase()),!Te(t)&&"data"in t&&na(),(t.body!=null||Te(e)&&e.body!==null)&&(a==="GET"||a==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");const o=t.body?t.body:Te(e)&&e.body!==null?ur(e):null;super(o,{size:t.size||e.size||0});const s=new ue(t.headers||e.headers||{});if(o!==null&&!s.has("Content-Type")){const f=Br(o);f&&s.set("Content-Type",f)}let i=Te(e)?e.signal:null;if("signal"in t&&(i=t.signal),i!=null&&!it(i))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let l=t.referrer==null?e.referrer:t.referrer;if(l==="")l="no-referrer";else if(l){const f=new URL(l);l=/^about:(\/\/)?client$/.test(f)?"client":f}else l=void 0;this[N]={method:a,redirect:t.redirect||e.redirect||"follow",headers:s,parsedURL:n,signal:i,referrer:l},this.follow=t.follow===void 0?e.follow===void 0?20:e.follow:t.follow,this.compress=t.compress===void 0?e.compress===void 0?!0:e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[N].method}get url(){return Zn(this[N].parsedURL)}get headers(){return this[N].headers}get redirect(){return this[N].redirect}get signal(){return this[N].signal}get referrer(){if(this[N].referrer==="no-referrer")return"";if(this[N].referrer==="client")return"about:client";if(this[N].referrer)return this[N].referrer.toString()}get referrerPolicy(){return this[N].referrerPolicy}set referrerPolicy(e){this[N].referrerPolicy=jn(e)}clone(){return new Ce(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(Ce.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});const aa=r=>{const{parsedURL:e}=r[N],t=new ue(r[N].headers);t.has("Accept")||t.set("Accept","*/*");let n=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(n="0"),r.body!==null){const i=ct(r);typeof i=="number"&&!Number.isNaN(i)&&(n=String(i))}n&&t.set("Content-Length",n),r.referrerPolicy===""&&(r.referrerPolicy=Xn),r.referrer&&r.referrer!=="no-referrer"?r[N].referrer=ra(r):r[N].referrer="no-referrer",r[N].referrer instanceof URL&&t.set("Referer",r.referrer),t.has("User-Agent")||t.set("User-Agent","node-fetch"),r.compress&&!t.has("Accept-Encoding")&&t.set("Accept-Encoding","gzip, deflate, br");let{agent:a}=r;typeof a=="function"&&(a=a(e)),!t.has("Connection")&&!a&&t.set("Connection","close");const o=Yn(e),s={path:e.pathname+o,method:r.method,headers:t[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:a};return{parsedURL:e,options:s}};class oa extends _e{constructor(e,t="aborted"){super(e,t)}}const ia=new Set(["data:","http:","https:"]);async function sa(r,e){return new Promise((t,n)=>{const a=new Ce(r,e),{parsedURL:o,options:s}=aa(a);if(!ia.has(o.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${o.protocol.replace(/:$/,"")}" is not supported.`);const i=(o.protocol==="https:"?G:G).request,{signal:l}=a;let f=null;const c=()=>{const h=new oa("The operation was aborted.");n(h),a.body&&a.body instanceof se.Readable&&a.body.destroy(h),!(!f||!f.body)&&f.body.emit("error",h)};if(l&&l.aborted){c();return}const b=()=>{c(),m()},u=i(o.toString(),s);l&&l.addEventListener("abort",b);const m=()=>{u.abort(),l&&l.removeEventListener("abort",b)};u.on("error",h=>{n(new ie(`request to ${a.url} failed, reason: ${h.message}`,"system",h)),m()}),fa(u,h=>{f&&f.body&&f.body.destroy(h)}),mr.version<"v14"&&u.on("socket",h=>{let T;h.prependListener("end",()=>{T=h._eventsCount}),h.prependListener("close",g=>{if(f&&T<h._eventsCount&&!g){const O=new Error("Premature close");O.code="ERR_STREAM_PREMATURE_CLOSE",f.body.emit("error",O)}})}),u.on("response",h=>{u.setTimeout(0);const T=pt(h.rawHeaders);if(Ur(h.statusCode)){const S=T.get("Location");let v=null;try{v=S===null?null:new URL(S,a.url)}catch{if(a.redirect!=="manual"){n(new ie(`uri requested responds with an invalid redirect URL: ${S}`,"invalid-redirect")),m();return}}switch(a.redirect){case"error":n(new ie(`uri requested responds with a redirect, redirect mode is set to error: ${a.url}`,"no-redirect")),m();return;case"manual":break;case"follow":{if(v===null)break;if(a.counter>=a.follow){n(new ie(`maximum redirect reached at: ${a.url}`,"max-redirect")),m();return}const x={headers:new ue(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:ur(a),signal:a.signal,size:a.size,referrer:a.referrer,referrerPolicy:a.referrerPolicy};if(!st(a.url,v)||!ft(a.url,v))for(const R of["authorization","www-authenticate","cookie","cookie2"])x.headers.delete(R);if(h.statusCode!==303&&a.body&&e.body instanceof se.Readable){n(new ie("Cannot follow redirect with body being a readable stream","unsupported-redirect")),m();return}(h.statusCode===303||(h.statusCode===301||h.statusCode===302)&&a.method==="POST")&&(x.method="GET",x.body=void 0,x.headers.delete("content-length"));const F=ta(T);F&&(x.referrerPolicy=F),t(sa(new Ce(v,x))),m();return}default:return n(new TypeError(`Redirect option '${a.redirect}' is not a valid value of RequestRedirect`))}}l&&h.once("end",()=>{l.removeEventListener("abort",b)});let g=ne.pipeline(h,new ne.PassThrough,S=>{S&&n(S)});mr.version<"v12.10"&&h.on("aborted",b);const O={url:a.url,status:h.statusCode,statusText:h.statusMessage,headers:T,size:a.size,counter:a.counter,highWaterMark:a.highWaterMark},p=T.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||p===null||h.statusCode===204||h.statusCode===304){f=new Q(g,O),t(f);return}const y={flush:G.Z_SYNC_FLUSH,finishFlush:G.Z_SYNC_FLUSH};if(p==="gzip"||p==="x-gzip"){g=ne.pipeline(g,G.createGunzip(y),S=>{S&&n(S)}),f=new Q(g,O),t(f);return}if(p==="deflate"||p==="x-deflate"){const S=ne.pipeline(h,new ne.PassThrough,v=>{v&&n(v)});S.once("data",v=>{(v[0]&15)===8?g=ne.pipeline(g,G.createInflate(),x=>{x&&n(x)}):g=ne.pipeline(g,G.createInflateRaw(),x=>{x&&n(x)}),f=new Q(g,O),t(f)}),S.once("end",()=>{f||(f=new Q(g,O),t(f))});return}if(p==="br"){g=ne.pipeline(g,G.createBrotliDecompress(),S=>{S&&n(S)}),f=new Q(g,O),t(f);return}f=new Q(g,O),t(f)}),ht(u,a).catch(n)})}function fa(r,e){const t=U.from(`0\r
\r
`);let n=!1,a=!1,o;r.on("response",s=>{const{headers:i}=s;n=i["transfer-encoding"]==="chunked"&&!i["content-length"]}),r.on("socket",s=>{const i=()=>{if(n&&!a){const f=new Error("Premature close");f.code="ERR_STREAM_PREMATURE_CLOSE",e(f)}},l=f=>{a=U.compare(f.slice(-5),t)===0,!a&&o&&(a=U.compare(o.slice(-3),t.slice(0,3))===0&&U.compare(f.slice(-2),t.slice(3))===0),o=f};s.prependListener("close",i),s.on("data",l),r.on("close",()=>{s.removeListener("close",i),s.removeListener("data",l)})})}export{oa as AbortError,ie as FetchError,ue as Headers,Ce as Request,Q as Response,sa as default,Ur as isRedirect};
